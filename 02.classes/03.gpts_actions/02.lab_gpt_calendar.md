## Lab – Integración de GPT con Google Calendar

**Objetivo**: Crear un GPT personalizado que se integre con Google Calendar para gestionar eventos y reuniones mediante acciones personalizadas (GPT Actions).

**Materiales necesarios**:
- Acceso a ChatGPT Plus (para GPTs)
- Cuenta de Google con acceso a Google Calendar
- Acceso a Google Cloud Console para configurar credenciales OAuth

**Instrucciones**:

1. **Configuración en Google Cloud Console**:
   - Visita [console.cloud.google.com](https://console.cloud.google.com)
   - Crea un nuevo proyecto o selecciona uno existente
   - Habilita la API de Google Calendar:
     - Ve a "APIs & Services > Library"
     - Busca "Google Calendar API" y habilítala
   - Configura la pantalla de consentimiento OAuth:
     - Ve a "Credentials > Configure consent screen"
     - Selecciona "Internal" como tipo de usuario
     - Completa la información requerida (nombre de la app, correo de soporte, etc.)
   - Crea credenciales OAuth:
     - Ve a "Credentials > Create Credentials > OAuth client ID"
     - Selecciona "Web Application" como tipo
     - En "Authorized JavaScript origins" añade:
       - https://chat.openai.com
       - https://chatgpt.com
     - Guarda el Client ID y Client Secret para usarlos más adelante
   - Configura los scopes de acceso:
     - Ve a "Data Access > Add or Remove Scopes"
     - Filtra por "https://www.googleapis.com/auth/calendar"
     - Selecciona este scope y guarda los cambios

2. **Creación del GPT**:
   - Accede a ChatGPT y selecciona "Create a GPT"
   - Nombra tu GPT como "Calendar Assistant"
   - Escribe una descripción adecuada para tu asistente de calendario

3. **Configuración de OAuth**:
   - En la configuración del GPT, haz clic en "Actions"
   - Haz clic en el icono de configuración y selecciona "OAuth"
   - Completa los siguientes campos:
     - Client ID: [Tu Client ID de Google Cloud]
     - Client Secret: [Tu Client Secret de Google Cloud]
     - Authorization URL: https://accounts.google.com/o/oauth2/auth
     - Token URL: https://oauth2.googleapis.com/token
     - Scope: https://www.googleapis.com/auth/calendar
   - Guarda la configuración

4. **Configuración del esquema OpenAPI**:
   - En la sección de Actions, introduce el siguiente esquema OpenAPI:

   ```yaml
   openapi: 3.1.0
   info:
     title: Google Calendar API
     description: Esta API permite leer y crear eventos en el Google Calendar del usuario.
     version: 1.0.0
   servers:
     - url: https://www.googleapis.com/calendar/v3
       description: Servidor de la API de Google Calendar
   
   paths:
     /calendars/primary/events:
       get:
         summary: Listar eventos del calendario principal
         description: Obtiene una lista de eventos del calendario principal de Google del usuario.
         operationId: listarEventos
         tags:
           - Calendar
         parameters:
           - name: timeMin
             in: query
             description: El límite inferior (inclusive) de los eventos a recuperar, en formato RFC3339.
             required: false
             schema:
               type: string
               format: date-time
               example: "2024-06-01T00:00:00Z"
           - name: timeMax
             in: query
             description: El límite superior (exclusive) de los eventos a recuperar, en formato RFC3339.
             required: false
             schema:
               type: string
               format: date-time
               example: "2024-06-30T00:00:00Z"
           - name: maxResults
             in: query
             description: Número máximo de eventos a devolver.
             required: false
             schema:
               type: integer
               format: int32
               default: 10
         responses:
           '200':
             description: Lista de eventos recuperada con éxito
             content:
               application/json:
                 schema:
                   type: object
       post:
         summary: Crear un nuevo evento
         description: Crea un nuevo evento en el calendario principal del usuario.
         operationId: crearEvento
         tags:
           - Calendar
         requestBody:
           required: true
           content:
             application/json:
               schema:
                 type: object
                 required:
                   - summary
                   - start
                   - end
                 properties:
                   summary:
                     type: string
                     description: Título del evento
                     example: "Reunión de equipo"
                   description:
                     type: string
                     description: Descripción detallada del evento
                     example: "Discutir los avances del proyecto"
                   location:
                     type: string
                     description: Ubicación del evento
                     example: "Sala de conferencias A"
                   start:
                     type: object
                     required:
                       - dateTime
                       - timeZone
                     properties:
                       dateTime:
                         type: string
                         format: date-time
                         description: Fecha y hora de inicio en formato RFC3339
                         example: "2024-06-15T09:00:00-03:00"
                       timeZone:
                         type: string
                         description: Zona horaria
                         example: "America/Montevideo"
                   end:
                     type: object
                     required:
                       - dateTime
                       - timeZone
                     properties:
                       dateTime:
                         type: string
                         format: date-time
                         description: Fecha y hora de finalización en formato RFC3339
                         example: "2024-06-15T10:00:00-03:00"
                       timeZone:
                         type: string
                         description: Zona horaria
                         example: "America/Montevideo"
         responses:
           '200':
             description: Evento creado con éxito
             content:
               application/json:
                 schema:
                   type: object
   
     /calendars/primary/events/{eventId}:
       get:
         summary: Obtener detalles de un evento
         description: Recupera los detalles de un evento específico por su ID.
         operationId: obtenerEvento
         tags:
           - Calendar
         parameters:
           - name: eventId
             in: path
             description: ID del evento a recuperar
             required: true
             schema:
               type: string
         responses:
           '200':
             description: Detalles del evento recuperados con éxito
             content:
               application/json:
                 schema:
                   type: object
       delete:
         summary: Eliminar un evento
         description: Elimina un evento específico por su ID.
         operationId: eliminarEvento
         tags:
           - Calendar
         parameters:
           - name: eventId
             in: path
             description: ID del evento a eliminar
             required: true
             schema:
               type: string
         responses:
           '204':
             description: Evento eliminado con éxito
   ```

5. **Configuración de instrucciones**:
   - **Nombre**: Calendar Assistant
   - **Descripción**: Asistente que te ayuda a gestionar tu calendario de Google, crear eventos, listar próximas reuniones y más.
   - **Instrucciones**: Escribe instrucciones detalladas que incluyan:
     ```
     Eres un asistente especializado en la gestión de calendarios. Tu función es:
     
     1. Ayudar a los usuarios a crear nuevos eventos en su Google Calendar
     2. Listar los próximos eventos del calendario del usuario
     3. Proporcionar detalles de eventos específicos cuando se solicite
     4. Eliminar eventos cuando el usuario lo requiera
     5. Sugerir horarios disponibles para reuniones basándote en el calendario del usuario
     6. Recordar al usuario que debe autenticarse con su cuenta de Google la primera vez
     
     Cuando el usuario te pida crear un evento, asegúrate de solicitar toda la información necesaria:
     - Título del evento
     - Fecha y hora de inicio
     - Duración o hora de finalización
     - Descripción (opcional)
     - Ubicación (opcional)
     
     Utiliza un tono conversacional y amigable, y guía al usuario a través del proceso de autenticación si es necesario.
     ```

6. **Prueba y evaluación**:
   - Guarda tu GPT (puede ser privado para este ejercicio)
   - Pruébalo con las siguientes consultas:
     - "Muéstrame mis próximos eventos para esta semana"
     - "Crea una reunión con el equipo para mañana a las 10 AM"
     - "¿Tengo algún evento programado para el viernes?"
     - "Elimina la reunión del jueves a las 3 PM"
   - Evalúa si las respuestas son correctas y si la integración con Google Calendar funciona adecuadamente

**Criterios de evaluación**:
- El GPT se conecta correctamente con Google Calendar mediante OAuth
- El GPT puede listar eventos existentes del calendario
- El GPT puede crear nuevos eventos con la información proporcionada
- El GPT puede eliminar eventos cuando se le solicita
- Las respuestas son claras y guían al usuario en el proceso

**Entrega**: 
- Comparte capturas de pantalla de tu GPT y de algunas interacciones que demuestren su funcionamiento
- Incluye una breve reflexión (máximo 200 palabras) sobre las posibilidades que ofrece la integración de GPTs con APIs externas para la productividad personal o empresarial

**Nota**: Este ejercicio requiere conocimientos básicos sobre APIs y autenticación OAuth. Si encuentras dificultades, consulta la documentación oficial de OpenAI sobre GPT Actions y la documentación de Google Calendar API.